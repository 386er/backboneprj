<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>

<head>

<title>Testprojekt Backbone.js</title>

<script src="http://localhost/~intern/repos/backboneprj/library/jquery.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/library/underscore.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/library/backbone.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/library/mustache.js"></script>
<script type="text/javascript" >
	window.backboneprj = {
	}
</script>
<script src="http://localhost/~intern/repos/backboneprj/blogitem.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/blogcollection.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/blogeditview.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/blogview.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/blogcollectionview.js"></script>
<script src="http://localhost/~intern/repos/backboneprj/application.js"></script>
<script type="text/javascript" >

/*global init*/
$(function() {

	var $dfdOne = $.getJSON('http://localhost/~intern/repos/backboneprj/data.json');
	var $dfdTwo = $.get('http://localhost/~intern/repos/backboneprj/post.html');
	var $dfdThr = $.get('http://localhost/~intern/repos/backboneprj/form.html');

	$.when($dfdOne, $dfdTwo, $dfdThr).then( function(responseJSON, responseHTMLone,
		responseHTMLtwo) {

		var JSONdata = [];
		$.each(responseJSON[0], function(key, val) {
			JSONdata.push(val);
			JSONdata = _.flatten(JSONdata);
		});

		backboneprj.data = JSONdata;
		backboneprj.BlogViewTemplate = responseHTMLone[0];
		backboneprj.FormViewTemplate = responseHTMLtwo[0];

		init();

	})

});

</script>

</head>

<body style="width:100%;height:100%;background-size:100% 100%;margin:0px">

<div id='blogroll' style="width:850px; height:570px; border: 1px solid grey; position:relative; margin:auto; padding-top:50px; padding-left:50px; overflow:auto; border-top:0px">
</div>

<div id='form' style="width:850px; height:200px; position:relative; margin:auto; padding-top:50px; padding-left:50px; ">
</div>

</body>

</html>

